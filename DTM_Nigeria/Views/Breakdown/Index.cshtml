@model IEnumerable<DTM_Nigeria.Models.iom_ward_households_breakdown>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Age breakdown table</h2>
<h3>@ViewBag.WardInfo</h3>

@if (Model.Count() > 0)
{
    <p>
        @Html.ActionLink("Edit", "Edit", new { id = 1 }) |
        @Html.ActionLink("Delete", "Delete", new { id = 1 })
    </p>

<table width=100%>
    <tr>
        <th rowspan=2>
            hhs
        </th>
        <th rowspan=2>
            total
        </th>

        <th colspan=2> < 1</th>
        <th colspan=2>1-5</th>
        <th colspan=2>6-17</th>
        <th colspan=2>18-59</th>
        <th colspan=2>60+</th>
        <th colspan=2>Total</th></tr><tr>
        <th>
            m
        </th>
        <th>
            f
        </th>
        <th>
            m
        </th>
        <th>
            f
        </th>
        <th>
            m
        </th>
        <th>
            f
        </th>
        <th>
            m
        </th>
        <th>
            f
        </th>
        <th>
            m
        </th>
        <th>
            f
        </th>
        <th>
            m
        </th>
        <th>
            f
        </th>
    </tr>

    @{
   int gtot=0, gtot_m=0, gtot_f=0, tlt1_m=0, tlt1_f=0, t1_5_m=0, t1_5_f=0, t6_17_m=0, t6_17_f=0, t18_59_m=0, t18_59_f=0, t60p_m=0, t60p_f=0;
}

@foreach (var item in Model)
{
    int total_m, total_f, total;
    
    

    total_m = (item.m_lt1??0) + (item.m_1_5??0) + (item.m_6_17??0) + (item.m_18_59??0) + (item.m_60p??0) ;

   // total_m =(item.f_18_59??0) + item.f_6_17??0 ;
    
    total_f = (item.f_lt1??0) + (item.f_1_5??0) + (item.f_6_17??0) + (item.f_18_59??0) + (item.f_60p??0);

    total = total_m + total_f;

    gtot = gtot + total;

    gtot_m = gtot_m + total_m;
    
    gtot_f = gtot_f + total_f;

    tlt1_m = tlt1_m + (item.m_lt1 ?? 0);

    tlt1_f = tlt1_f + (item.f_lt1 ?? 0);

    t1_5_m = t1_5_m + (item.m_1_5 ?? 0);

    t1_5_f = t1_5_f + (item.f_1_5 ?? 0);

    t6_17_m = t6_17_m + (item.m_6_17 ?? 0);

    t6_17_f = t6_17_f + (item.f_6_17 ?? 0);

    t18_59_m = t18_59_m + (item.m_18_59 ?? 0);

    t18_59_f = t18_59_f + (item.f_18_59 ?? 0);

    t60p_m = t60p_m + (item.m_60p ?? 0);

    t60p_f = t60p_f + (item.f_60p ?? 0);
    
   /* string style = ((item.total_m??0) == total_m && (item.total_f??0) == total_f && (item.total??0) == total_m + total_f) ? null : "background-color:pink";
            
    <tr style="@style">*/
    
    <tr>

        <td bgcolor="silver">
            @Html.DisplayFor(modelItem => item.hhs)
        </td>
        <td bgcolor="#ccffff">
            @total
            @*Html.DisplayFor(modelItem => item.total)*@
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.m_lt1)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.f_lt1)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.m_1_5)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.f_1_5)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.m_6_17)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.f_6_17)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.m_18_59)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.f_18_59)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.m_60p)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.f_60p)
        </td>
        <td bgcolor="#ccffff">
            @total_m
            @*Html.DisplayFor(modelItem => item.total_m)*@
        </td>
        <td bgcolor="#ccffff">
            @total_f
            @*Html.DisplayFor(modelItem => item.total_f)*@
        </td>

    </tr>
}


<tr bgcolor="#ccffff">

        <td >
            Total
        </td>
        <td >
            @gtot
        </td>
        <td>
            @tlt1_m
        </td>
        <td>
            @tlt1_f
        </td>
        <td>
            @t1_5_m
        </td>
        <td>
            @t1_5_f
        </td>
        <td>
            @t6_17_m
        </td>
        <td>
            @t6_17_f
        </td>
        <td>
            @t18_59_m
        </td>
        <td>
            @t18_59_f
        </td>
        <td>
            @t60p_m
        </td>
        <td>
            @t60p_f
        </td>
        <td bgcolor="#ccffff">
            @gtot_m
            @*Html.DisplayFor(modelItem => item.total_m)*@
        </td>
        <td bgcolor="#ccffff">
            @gtot_f
            @*Html.DisplayFor(modelItem => item.total_f)*@
        </td>

    </tr>

</table>
  }
else
{ 
    
<p>
    @Html.ActionLink("Add new breakdown", "Create")
</p>
        
<b>No data</b>
}
<p>
    @Html.ActionLink("Back to B2F", "Index", "B2F")
</p>
